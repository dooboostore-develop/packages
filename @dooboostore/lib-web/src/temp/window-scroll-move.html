<!DOCTYPE html>
<html>
<head>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 2000px; /* 넓은 콘텐츠로 스크롤 가능 */
            height: 1500px;
            overflow: auto;
        }
        body.dragging {
            cursor: grabbing; /* 드래그 모드 커서 */
            background: #e0f7fa; /* 활성화 상태 피드백 */
        }
        #content {
            width: 100%;
            height: 100%;
            background: #f0f0f0;
        }
        button {
            position: fixed; /* 버튼 고정 */
            top: 10px;
            left: 10px;
            padding: 8px 16px;
            z-index: 1000;
        }
    </style>
</head>
<body data-dr-class="set(MycLasS),set(AnotherClass)">
<button id="toggleButton">Toggle Drag Mode (Off)</button>
<div id="content">드래그하여 뷰포트를 이동하세요. (토글 버튼 클릭 후)</div>
<p style="position: absolute; top: 200px; left: 200px;">스크롤 테스트 콘텐츠</p>

<script>
    const body = document.body;
    const toggleButton = document.getElementById('toggleButton');
    let isDragMode = false;
    let isDragging = false;
    let startX, startY;
    let scrollLeft, scrollTop;

    // 대소문자 클래스 적용
    const directives = body.getAttribute('data-dr-class').split(',');
    directives.forEach(directive => {
        const match = directive.match(/^set\("([^"]+)"\)$/);
        if (match) {
            body.classList.add(match[1]); // MycLasS, AnotherClass 추가
            console.log('Applied class:', match[1]);
        }
    });

    // 토글 버튼 이벤트
    toggleButton.addEventListener('click', () => {
        isDragMode = !isDragMode;
        toggleButton.textContent = `Toggle Drag Mode (${isDragMode ? 'On' : 'Off'})`;
        body.classList.toggle('dragging', isDragMode);
        console.log('Drag mode:', isDragMode ? 'Enabled' : 'Disabled');
    });

    // 마우스 이벤트
    document.addEventListener('mousedown', startDragging);
    document.addEventListener('mousemove', drag);
    document.addEventListener('mouseup', stopDragging);

    // 터치 이벤트
    document.addEventListener('touchstart', startDragging);
    document.addEventListener('touchmove', drag);
    document.addEventListener('touchend', stopDragging);

    function startDragging(e) {
        if (!isDragMode || e.target === toggleButton) return; // 버튼 클릭은 제외
        const clientX = e.clientX || e.touches[0].clientX;
        const clientY = e.clientY || e.touches[0].clientY;
        startX = clientX;
        startY = clientY;
        scrollLeft = window.scrollX;
        scrollTop = window.scrollY;
        isDragging = true;
    }

    function drag(e) {
        if (!isDragging || !isDragMode) return;
        e.preventDefault();
        const clientX = e.clientX || (e.touches && e.touches[0].clientX);
        const clientY = e.clientY || (e.touches && e.touches[0].clientY);
        const deltaX = startX - clientX;
        const deltaY = startY - clientY;
        window.scrollTo(scrollLeft + deltaX, scrollTop + deltaY);
    }

    function stopDragging() {
        isDragging = false;
    }
</script>
</body>
</html>